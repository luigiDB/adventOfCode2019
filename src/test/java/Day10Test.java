import org.apache.commons.lang3.tuple.Pair;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

public class Day10Test {

    private Day10 day10;

    @Before
    public void setUp() throws Exception {
        day10 = new Day10();
    }

    @Test
    public void es1Acceptance() {
        String[] map = {
                ".#..#",
                ".....",
                "#####",
                "....#",
                "...##"
        };
        Assert.assertEquals(8, day10.maxVisibleAsteroids(map));
    }

    @Test
    public void es1Acceptance2() {
        String[] map = {
                "......#.#.",
                "#..#.#....",
                "..#######.",
                ".#.#.###..",
                ".#..#.....",
                "..#....#.#",
                "#..#....#.",
                ".##.#..###",
                "##...#..#.",
                ".#....####"
        };
        Assert.assertEquals(33, day10.maxVisibleAsteroids(map));
    }

    @Test
    public void es1Acceptance3() {
        String[] map = {
                ".#..##.###...#######",
                "##.############..##.",
                ".#.######.########.#",
                ".###.#######.####.#.",
                "#####.##.#.##.###.##",
                "..#####..#.#########",
                "####################",
                "#.####....###.#.#.##",
                "##.#################",
                "#####.##.###..####..",
                "..######..##.#######",
                "####.##.####...##..#",
                ".#####..#.######.###",
                "##...#.##########...",
                "#.##########.#######",
                ".####.#.###.###.#.##",
                "....##.##.###..#####",
                ".#.#.###########.###",
                "#.#.#.#####.####.###",
                "###.##.####.##.#..##"
        };
        Assert.assertEquals(210, day10.maxVisibleAsteroids(map));
    }

    @Test
    public void es1() {
        String[] map = {
                ".#..#..#..#...#..#...###....##.#....",
                ".#.........#.#....#...........####.#",
                "#..##.##.#....#...#.#....#..........",
                "......###..#.#...............#.....#",
                "......#......#....#..##....##.......",
                "....................#..............#",
                "..#....##...#.....#..#..........#..#",
                "..#.#.....#..#..#..#.#....#.###.##.#",
                ".........##.#..#.......#.........#..",
                ".##..#..##....#.#...#.#.####.....#..",
                ".##....#.#....#.......#......##....#",
                "..#...#.#...##......#####..#......#.",
                "##..#...#.....#...###..#..........#.",
                "......##..#.##..#.....#.......##..#.",
                "#..##..#..#.....#.#.####........#.#.",
                "#......#..........###...#..#....##..",
                ".......#...#....#.##.#..##......#...",
                ".............##.......#.#.#..#...##.",
                "..#..##...#...............#..#......",
                "##....#...#.#....#..#.....##..##....",
                ".#...##...........#..#..............",
                ".............#....###...#.##....#.#.",
                "#..#.#..#...#....#.....#............",
                "....#.###....##....##...............",
                "....#..........#..#..#.......#.#....",
                "#..#....##.....#............#..#....",
                "...##.............#...#.....#..###..",
                "...#.......#........###.##..#..##.##",
                ".#.##.#...##..#.#........#.....#....",
                "#......#....#......#....###.#.....#.",
                "......#.##......#...#.#.##.##...#...",
                "..#...#.#........#....#...........#.",
                "......#.##..#..#.....#......##..#...",
                "..##.........#......#..##.#.#.......",
                ".#....#..#....###..#....##..........",
                "..............#....##...#.####...##."
        };
        Assert.assertEquals(276, day10.maxVisibleAsteroids(map));
    }

    @Test
    public void es2Acceptance() {
        String[] map = {
                ".#....#####...#..",
                "##...##.#####..##",
                "##...#...#.#####.",
                "..#.....X...###..",
                "..#.#.....#....##"
        };
        Assert.assertEquals(Pair.of(8.0, 1.0), day10.get200Asteroid(map, Pair.of(8.0, 3.0), 0));
        Assert.assertEquals(Pair.of(9.0, 0.0), day10.get200Asteroid(map, Pair.of(8.0, 3.0), 1));
        Assert.assertEquals(Pair.of(9.0, 1.0), day10.get200Asteroid(map, Pair.of(8.0, 3.0), 2));
    }

    @Test
    public void es2Acceptance2() {
        String[] map = {
                ".#..##.###...#######",
                "##.############..##.",
                ".#.######.########.#",
                ".###.#######.####.#.",
                "#####.##.#.##.###.##",
                "..#####..#.#########",
                "####################",
                "#.####....###.#.#.##",
                "##.#################",
                "#####.##.###..####..",
                "..######..##.#######",
                "####.##.####...##..#",
                ".#####..#.######.###",
                "##...#.##########...",
                "#.##########.#######",
                ".####.#.###.###.#.##",
                "....##.##.###..#####",
                ".#.#.###########.###",
                "#.#.#.#####.####.###",
                "###.##.####.##.#..##"
        };
        Assert.assertEquals(Pair.of(11.0, 12.0), day10.get200Asteroid(map, Pair.of(11.0, 13.0), 0));
        Assert.assertEquals(Pair.of(12.0, 1.0), day10.get200Asteroid(map, Pair.of(11.0, 13.0), 1));
        Assert.assertEquals(Pair.of(12.0, 2.0), day10.get200Asteroid(map, Pair.of(11.0, 13.0), 2));
        Assert.assertEquals(Pair.of(12.0, 8.0), day10.get200Asteroid(map, Pair.of(11.0, 13.0), 9));
        Assert.assertEquals(Pair.of(8.0, 2.0), day10.get200Asteroid(map, Pair.of(11.0, 13.0), 199));
    }

    @Test
    public void es2() {
        String[] map = {
                ".#..#..#..#...#..#...###....##.#....",
                ".#.........#.#....#...........####.#",
                "#..##.##.#....#...#.#....#..........",
                "......###..#.#...............#.....#",
                "......#......#....#..##....##.......",
                "....................#..............#",
                "..#....##...#.....#..#..........#..#",
                "..#.#.....#..#..#..#.#....#.###.##.#",
                ".........##.#..#.......#.........#..",
                ".##..#..##....#.#...#.#.####.....#..",
                ".##....#.#....#.......#......##....#",
                "..#...#.#...##......#####..#......#.",
                "##..#...#.....#...###..#..........#.",
                "......##..#.##..#.....#.......##..#.",
                "#..##..#..#.....#.#.####........#.#.",
                "#......#..........###...#..#....##..",
                ".......#...#....#.##.#..##......#...",
                ".............##.......#.#.#..#...##.",
                "..#..##...#...............#..#......",
                "##....#...#.#....#..#.....##..##....",
                ".#...##...........#..#..............",
                ".............#....###...#.##....#.#.",
                "#..#.#..#...#....#.....#............",
                "....#.###....##....##...............",
                "....#..........#..#..#.......#.#....",
                "#..#....##.....#............#..#....",
                "...##.............#...#.....#..###..",
                "...#.......#........###.##..#..##.##",
                ".#.##.#...##..#.#........#.....#....",
                "#......#....#......#....###.#.....#.",
                "......#.##......#...#.#.##.##...#...",
                "..#...#.#........#....#...........#.",
                "......#.##..#..#.....#......##..#...",
                "..##.........#......#..##.#.#.......",
                ".#....#..#....###..#....##..........",
                "..............#....##...#.####...##."
        };
        Assert.assertEquals(Pair.of(13.0, 21.0), day10.get200Asteroid(map, Pair.of(17.0, 22.0), 199));
    }

}